const LIBRARY = {
    " ": " "
};

function Checker() {
    document.getElementById("encode").disabled = message.replaceAll(" ", "").length < 26;
};

function Magic(input) {
    let unique = new Set();
    input.filter((item, i) => {
        if (!unique.has(item)) {
            unique.add(item);
        } else {
            unique.delete(item);
            input[i] = input.indexOf(input[i]) + 1;
        }
    });
    if(unique.size < 25){
        Magic(input);
    }
    return input;
}

function GenerateLibrary(encoding_phrase, message) {
    let alphabet = "abcdefghijklmnopqrstuvwxyz";
    let encoding_array = Magic(encoding_phrase.replaceAll(" ", "").split("").slice(0, 26));
    for(let i in alphabet){
        LIBRARY[alphabet[i]] = encoding_array[i];
    }
}

function main() {
    let encoding_phrase = document.getElementById("encoding_phrase").value.toLowerCase();
    let message = document.getElementById("message").value.toLowerCase();
    if (encoding_phrase.replaceAll(" ", "").length >= 25) {
        GenerateLibrary(encoding_phrase, message);
    }
    let output = document.getElementById("output");
    let new_output = "";
    for(let i in message){
        new_output += LIBRARY[message[i]];
    }
    output.value = new_output;
}